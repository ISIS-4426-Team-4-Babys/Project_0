-- Create tables
CREATE TABLE usuario (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nombre_usuario VARCHAR(50) NOT NULL UNIQUE,
    contrasena TEXT NOT NULL,
    imagen_perfil TEXT
);

CREATE TABLE categoria (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    descripcion TEXT
);

CREATE TABLE tarea (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    texto TEXT NOT NULL,
    fecha_creacion DATE NOT NULL,
    fecha_finalizacion DATE,
    estado VARCHAR(20) NOT NULL CHECK (estado IN ('Sin Empezar', 'Empezada', 'Finalizada')),
    id_categoria BIGINT NOT NULL,
    id_usuario BIGINT NOT NULL,
    CONSTRAINT tarea_id_categoria_fkey FOREIGN KEY (id_categoria) REFERENCES categoria(id) ON DELETE CASCADE,
    CONSTRAINT tarea_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES usuario(id) ON DELETE CASCADE
);


